import{_ as l,c as u,o as r,a as e,t as i,b as o,d as m,w as f,g as p,e as g,f as y,F as h,r as S,h as $,n as C,l as c,i as k,j as N,k as j,m as B,p as I,q as A,s as U,u as x}from"./index.es-Dg7itf3e.js";/* empty css                   */const E=["id"],q={class:"row-top"},O={class:"student-id"},D={class:"student-name"},J=["href"],R={class:"student-status"},T={class:"student-btn"},F={class:"student-del"},L=["id"],V={name:"Student",props:{id:{required:!0,default:9999,type:Number},fname:{required:!1,default:"Joost",type:String},lname:{required:!1,default:"Doe",type:String},active:{required:!0,default:"true",type:String}},components:[l],methods:{confirm_delete(){document.getElementById(`delete-conf-${this.id}`).classList.toggle("hidden")},async do_delete(){const s=p("user"),n=await(await fetch("/api/students/delete",{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:s,id:this.id})})).json();n.error?console.error(n.msg):window.location.reload()}}},b=Object.assign(V,{setup(s){const t=n=>{localStorage.setItem("student",n),window.location.href=`/manage/${n}`};return(n,a)=>(r(),u("div",{id:`row-${s.id}`,class:"student-row"},[e("div",q,[e("span",O,i(s.id),1),e("span",D,[e("a",{href:`/manage/${s.id}`},i(s.fname)+" "+i(s.lname),9,J)]),e("span",R,i(s.active==="true"?"Active":"Inactive"),1),e("span",T,[o(l,{classes:"btn btn-manage",base:"pencil",onClicked:a[0]||(a[0]=d=>t(s.id))})]),e("span",F,[o(l,{classes:"btn btn-del",base:"minus",alt:"caret-up",onClicked:n.confirm_delete},null,8,["onClicked"])])]),e("div",{id:`delete-conf-${s.id}`,class:"row-bottom row-del hidden"},[e("h5",null,"Delete entry for "+i(s.fname)+" "+i(s.lname)+"?",1),e("p",null,[a[1]||(a[1]=m("You cannot undo this action, ")),e("strong",null,"and all of "+i(s.fname)+"'s classes will also be deleted!",1)]),o(l,{classes:"btn btn-del",base:"minus",onClicked:n.do_delete},{default:f(()=>a[2]||(a[2]=[m(" Delete")])),_:1,__:[2]},8,["onClicked"])],8,L)],8,E))}}),M={id:"rate-menu"},P=["value"],z={name:"RateMenu",props:{default:{required:!0,default:65,type:Number}},components:{IconButton:l}},_=Object.assign(z,{emits:["saved"],setup(s,{emit:t}){const n=t;return(a,d)=>(r(),u("div",M,[d[1]||(d[1]=e("label",null,"Default Rate: $",-1)),e("input",{id:"rate-field",type:"text",value:s.default},null,8,P),d[2]||(d[2]=e("label",null,"/hour ",-1)),o(l,{classes:"btn btn-save",label:"Save rate",base:"save",onClicked:d[0]||(d[0]=w=>n("saved"))})]))}}),Y={class:"student-row add-menu"},G={class:"flex-20"},H=["value"],K={class:"flex-10"},Q={name:"NewStudent",components:{IconButton:l},props:{default:{required:!0,default:65,type:Number}},methods:{async save_new_student(){const s=document.getElementById("new_student_fname").value,t=document.getElementById("new_student_lname").value,n=document.getElementById("new_student_active").checked,a=document.getElementById("new_student_rate").value;try{(await(await fetch("/api/students/add",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fname:s,lname:t,active:n,rate:a})})).json()).error!==!0?window.location.reload():window.alert("Error, please try again")}catch(d){console.log(d)}},disableSaves(){const s=document.querySelectorAll(".btn-save");for(let t=0;t<s.length;t++)s[t].setAttribute("disabled","disabled")},enableSaves(){const s=document.querySelectorAll(".btn-save");for(let t=0;t<s.length;t++)s[t].removeAttribute("disabled")}}},v=Object.assign(Q,{emits:["cancelled"],setup(s,{emit:t}){return(n,a)=>(r(),u("div",Y,[a[2]||(a[2]=e("div",{class:"flex-25"},[e("input",{id:"new_student_fname",type:"text",name:"fname",placeholder:"First Name"})],-1)),a[3]||(a[3]=e("div",{class:"flex-25"},[e("input",{id:"new_student_lname",type:"text",name:"lname",placeholder:"Last Name"})],-1)),e("div",G,[a[0]||(a[0]=m("$")),e("input",{id:"new_student_rate",type:"text",name:"new-rate",placeholder:"Rate",value:s.default},null,8,H),a[1]||(a[1]=m(" /hr"))]),a[4]||(a[4]=e("div",{class:"flex-20"},[e("input",{id:"new_student_active",type:"checkbox",checked:""}),e("label",{for:"new_student_active"},"Active?")],-1)),e("div",K,[o(l,{classes:"btn btn-save",base:"save",label:"Save changes",onClicked:n.save_new_student},null,8,["onClicked"])])]))}}),W={id:"main"},X={class:"tile"},Z={id:"student-table"},ee={class:"table-header"},te={class:"table-text student-btn-header"},se={class:"row-container"},ne={key:0,class:C("student-row")},ae={name:"app",components:{Student:b,RateMenu:_,NewStudent:v,IconButton:l},async mounted(){this.populateUser(),this.getStudents()},methods:{populateUser(){this.User={displayName:decodeURIComponent(p("displayName")),rate:p("rate")}},async getStudents(){const t=await(await fetch("/api/students/read")).json();t.error?console.log("Error"):this.Students=t.data},async save_rate(){const s=document.getElementById("rate-field").value,t=await fetch("/api/users/update",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({rate:s})});t.error?window.alert(t.msg):this.User.rate=s},toggle_new_student(){document.getElementById("new-student-menu").classList.toggle("hidden")}},data(){return{User:{},Students:[]}}},de=Object.assign(ae,{setup(s){return(t,n)=>(r(),u("main",W,[e("div",X,[e("header",null,[n[0]||(n[0]=e("span",{class:"header-left"},[e("a",{class:"screen-reader-only"},"Skip to Content")],-1)),n[1]||(n[1]=e("h3",null,"Students",-1)),o(g,null,{default:f(()=>[m(i(t.User.displayName?t.User.displayName.split(" ")[0]:"Joost"),1)]),_:1})]),e("div",Z,[e("div",ee,[n[2]||(n[2]=e("span",{class:"table-text student-id-header"},null,-1)),n[3]||(n[3]=e("span",{class:"table-text student-name-header"},"Student",-1)),n[4]||(n[4]=e("span",{class:"table-text student-status"},"All",-1)),n[5]||(n[5]=e("span",{class:"table-text student-del-header"},null,-1)),e("span",te,[o(l,{classes:"btn btn-add",base:"plus",alt:"caret-up",label:"Open/close new student menu",onClicked:t.toggle_new_student},null,8,["onClicked"])])]),e("div",se,[o(v,{id:"new-student-menu",class:"hidden",default:t.User.rate,onCancelled:t.toggle_new_student},null,8,["default","onCancelled"]),(r(!0),u(h,null,S(t.Students,a=>(r(),$(b,{key:a.id_short,id:a.id_short,fname:a.fname,lname:a.lname,active:a.active.toString()},null,8,["id","fname","lname","active"]))),128)),t.Students.length===0?(r(),u("div",ne,n[6]||(n[6]=[e("h5",{class:"table-text rate-table"},"No Students, add one!",-1)]))):y("",!0)])]),o(_,{default:t.User.rate,onSaved:t.save_rate},null,8,["default","onSaved"])])]))}});c.add(k);c.add(N);c.add(j);c.add(B);c.add(I);c.add(A);U(de).component("font-awesome-icon",x).mount("#app");
