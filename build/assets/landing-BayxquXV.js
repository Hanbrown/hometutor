import{_ as o,c,o as r,a as e,t as i,b as d,d as m,w as f,g as p,r as _,e as y,f as g,F as S,h as $,i as C,n as k,l as u,j as N,k as j,m as q,p as B,q as I,s as L,u as U,v as x,x as A}from"./index.es-BKICnqWv.js";/* empty css                   */const E=["id"],O={class:"row-top"},R={class:"student-id"},D={class:"student-name"},J=["href"],T={class:"student-status"},F={class:"student-btn"},V={class:"student-del"},M=["id"],P={name:"Student",props:{id:{required:!0,default:9999,type:Number},fname:{required:!1,default:"Joost",type:String},lname:{required:!1,default:"Doe",type:String},active:{required:!0,default:"true",type:String}},components:[o],methods:{confirm_delete(){document.getElementById(`delete-conf-${this.id}`).classList.toggle("hidden")},async do_delete(){const s=p("user"),t=await(await fetch("/api/students/delete",{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:s,id:this.id})})).json();t.error?console.error(t.msg):window.location.reload()}}},v=Object.assign(P,{setup(s){const a=t=>{window.location.href=`/manage/${t}`};return(t,n)=>(r(),c("div",{id:`row-${s.id}`,class:"student-row"},[e("div",O,[e("span",R,i(s.id),1),e("span",D,[e("a",{href:`/manage/${s.id}`},i(s.fname)+" "+i(s.lname),9,J)]),e("span",T,i(s.active==="true"?"Active":"Inactive"),1),e("span",F,[d(o,{classes:"btn btn-manage",base:"pencil",onClicked:n[0]||(n[0]=l=>a(s.id))})]),e("span",V,[d(o,{classes:"btn btn-del",base:"minus",alt:"caret-up",onClicked:t.confirm_delete},null,8,["onClicked"])])]),e("div",{id:`delete-conf-${s.id}`,class:"row-bottom row-del hidden"},[e("h5",null,"Delete entry for "+i(s.fname)+" "+i(s.lname)+"?",1),e("p",null,[n[1]||(n[1]=m("You cannot undo this action, ")),e("strong",null,"and all of "+i(s.fname)+"'s classes will also be deleted!",1)]),d(o,{classes:"btn btn-del",base:"minus",onClicked:t.do_delete},{default:f(()=>n[2]||(n[2]=[m(" Delete")])),_:1,__:[2]},8,["onClicked"])],8,M)],8,E))}}),z={id:"rate-menu"},Y=["value"],G={class:"spinner hidden"},H={name:"RateMenu",props:{default:{required:!0,default:65,type:Number}},components:{IconButton:o}},w=Object.assign(H,{emits:["saved"],setup(s,{emit:a}){const t=a;return(n,l)=>{const b=_("font-awesome-icon");return r(),c("div",z,[l[1]||(l[1]=e("label",null,"Default Rate: $",-1)),e("input",{id:"rate-field",type:"text",value:s.default},null,8,Y),l[2]||(l[2]=e("label",null,"/hour ",-1)),d(o,{classes:"btn btn-add",label:"Save rate",base:"save",onClicked:l[0]||(l[0]=ue=>t("saved"))}),e("span",G,[d(b,{icon:"rotate"})])])}}}),K={class:"student-row add-menu"},Q={class:"flex-20"},W=["value"],X={class:"flex-10"},Z={class:"spinner hidden"},ee={name:"NewStudent",components:{IconButton:o},props:{default:{required:!0,default:65,type:Number}},methods:{async save_new_student(){const s=document.getElementById("new_student_fname").value,a=document.getElementById("new_student_lname").value,t=document.getElementById("new_student_active").checked,n=document.getElementById("new_student_rate").value;this.$emit("saved",{fname:s,lname:a,active:t,rate:Number(n)})}}},h=Object.assign(ee,{emits:["cancelled","saved"],setup(s,{emit:a}){return(t,n)=>{const l=_("font-awesome-icon");return r(),c("div",K,[n[2]||(n[2]=e("div",{class:"flex-25"},[e("input",{id:"new_student_fname",type:"text",name:"fname",placeholder:"First Name"})],-1)),n[3]||(n[3]=e("div",{class:"flex-25"},[e("input",{id:"new_student_lname",type:"text",name:"lname",placeholder:"Last Name"})],-1)),e("div",Q,[n[0]||(n[0]=m("$")),e("input",{id:"new_student_rate",type:"text",name:"new-rate",placeholder:"Rate",value:s.default},null,8,W),n[1]||(n[1]=m(" /hr"))]),n[4]||(n[4]=e("div",{class:"flex-20"},[e("input",{id:"new_student_active",type:"checkbox",checked:""}),e("label",{for:"new_student_active"},"Active?")],-1)),e("div",X,[d(o,{classes:"btn btn-add",base:"save",label:"Save changes",onClicked:t.save_new_student},null,8,["onClicked"]),e("span",Z,[d(l,{icon:"rotate"})])])])}}}),te={id:"main"},ne={class:"tile"},se={id:"student-table"},ae={class:"table-header"},de={class:"table-text student-btn-header"},oe={class:"row-container"},le={key:0,class:k("student-row")},ie={name:"app",components:{Student:v,RateMenu:w,NewStudent:h,IconButton:o},async mounted(){this.populateUser(),this.getStudents()},methods:{populateUser(){this.User={displayName:decodeURIComponent(p("displayName")),rate:p("rate")}},async getStudents(){const a=await(await fetch("/api/students/read")).json();a.error?console.log("Error"):this.Students=a.data},async save_new_student(s){try{document.querySelector(".add-menu .spinner").classList.remove("hidden"),document.querySelector(".add-menu .btn-add").classList.add("hidden");let a={fname:s.fname,lname:s.lname,active:s.active,rate:s.rate};const n=await(await fetch("/api/students/add",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)})).json();n.error?window.alert(n.msg):(a.id=n.data.id,this.Students=[...this.Students,a])}catch(a){console.log(a),window.alert("An error occurred")}finally{document.querySelector(".add-menu .spinner").classList.add("hidden"),document.querySelector(".add-menu .btn-add").classList.remove("hidden")}},async save_rate(){document.querySelector("#rate-menu .btn-add").classList.add("hidden"),document.querySelector("#rate-menu .spinner").classList.remove("hidden");const s=document.getElementById("rate-field").value,t=await(await fetch("/api/users/update",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({rate:s})})).json();t.error?window.alert(t.msg):this.User.rate=s,document.querySelector("#rate-menu .btn-add").classList.remove("hidden"),document.querySelector("#rate-menu .spinner").classList.add("hidden")},toggle_new_student(){document.getElementById("new-student-menu").classList.toggle("hidden")}},data(){return{User:{},Students:[]}}},re=Object.assign(ie,{setup(s){return(a,t)=>(r(),c("main",te,[e("div",ne,[e("header",null,[t[0]||(t[0]=e("span",{class:"header-left"},[e("a",{class:"screen-reader-only"},"Skip to Content")],-1)),t[1]||(t[1]=e("h3",null,"Students",-1)),d(y,null,{default:f(()=>[m(i(a.User.displayName?a.User.displayName.split(" ")[0]:"Joost"),1)]),_:1})]),e("div",se,[e("div",ae,[t[2]||(t[2]=e("span",{class:"table-text student-id-header"},null,-1)),t[3]||(t[3]=e("span",{class:"table-text student-name-header"},"Student",-1)),t[4]||(t[4]=e("span",{class:"table-text student-status"},"All",-1)),t[5]||(t[5]=e("span",{class:"table-text student-del-header"},null,-1)),e("span",de,[d(o,{classes:"btn btn-add",base:"plus",alt:"caret-up",label:"Open/close new student menu",onClicked:a.toggle_new_student},null,8,["onClicked"])])]),e("div",oe,[d(h,{id:"new-student-menu",class:"hidden",default:a.User.rate,onCancelled:a.toggle_new_student,onSaved:a.save_new_student},null,8,["default","onCancelled","onSaved"]),(r(!0),c(S,null,$(a.Students,n=>(r(),C(v,{key:n.id,id:n.id,fname:n.fname,lname:n.lname,active:n.active.toString()},null,8,["id","fname","lname","active"]))),128)),a.Students.length===0?(r(),c("div",le,t[6]||(t[6]=[e("h5",{class:"table-text rate-table"},"No Students, add one!",-1)]))):g("",!0)])]),d(w,{default:a.User.rate,onSaved:a.save_rate},null,8,["default","onSaved"])])]))}});u.add(N);u.add(j);u.add(q);u.add(B);u.add(I);u.add(L);u.add(U);x(re).component("font-awesome-icon",A).mount("#app");
