import{_ as i,c,o as u,a as t,t as r,b as l,d as _,w as h,g as f,r as $,e as k,f as C,h as N,F as j,i as B,j as I,n as A,l as m,k as x,m as U,p as q,q as E,s as O,u as D,v as V,x as F}from"./index.es-DxxZWXdY.js";/* empty css                   */const L=["id"],M={class:"row-top"},R={class:"student-id"},T={class:"student-name"},J=["href"],P={class:"student-status"},z={class:"student-btn"},Y={class:"student-del"},G=["id"],H={name:"Student",props:{id:{required:!0,default:9999,type:Number},fname:{required:!1,default:"Joost",type:String},lname:{required:!1,default:"Doe",type:String},active:{required:!0,default:"true",type:String}},components:[i],methods:{confirm_delete(){document.getElementById(`delete-conf-${this.id}`).classList.toggle("hidden")},async do_delete(){const s=f("user"),e=await(await fetch("/api/students/delete",{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:s,id:this.id})})).json();e.error?console.error(e.msg):window.location.reload()}}},g=Object.assign(H,{setup(s){const n=e=>{localStorage.setItem("student",e),window.location.href=`/manage/${e}`};return(e,a)=>(u(),c("div",{id:`row-${s.id}`,class:"student-row"},[t("div",M,[t("span",R,r(s.id),1),t("span",T,[t("a",{href:`/manage/${s.id}`},r(s.fname)+" "+r(s.lname),9,J)]),t("span",P,r(s.active==="true"?"Active":"Inactive"),1),t("span",z,[l(i,{classes:"btn btn-manage",base:"pencil",onClicked:a[0]||(a[0]=p=>n(s.id))})]),t("span",Y,[l(i,{classes:"btn btn-del",base:"minus",alt:"caret-up",onClicked:e.confirm_delete},null,8,["onClicked"])])]),t("div",{id:`delete-conf-${s.id}`,class:"row-bottom row-del hidden"},[t("h5",null,"Delete entry for "+r(s.fname)+" "+r(s.lname)+"?",1),t("p",null,[a[1]||(a[1]=_("You cannot undo this action, ")),t("strong",null,"and all of "+r(s.fname)+"'s classes will also be deleted!",1)]),l(i,{classes:"btn btn-del",base:"minus",onClicked:e.do_delete},{default:h(()=>a[2]||(a[2]=[_(" Delete")])),_:1,__:[2]},8,["onClicked"])],8,G)],8,L))}}),K=(s,n)=>{const e=s.__vccOpts||s;for(const[a,p]of n)e[a]=p;return e},Q={name:"RateMenu",props:{default:{required:!0,default:65,type:Number}},components:{IconButton:i}},W={id:"rate-menu"},X=["value"];function Z(s,n,e,a,p,d){const o=$("icon-button");return u(),c("div",W,[n[0]||(n[0]=t("h5",null,"Default Rate: $",-1)),t("input",{type:"text",value:e.default},null,8,X),n[1]||(n[1]=t("h5",null,"per hour ",-1)),l(o,{classes:"btn btn-save",base:"save"})])}const v=K(Q,[["render",Z]]),ee={class:"student-row add-menu"},te={class:"student-btn"},se={name:"NewStudent",components:{IconButton:i}},w=Object.assign(se,{emits:["cancelled"],setup(s,{emit:n}){const e=()=>{const d=document.querySelectorAll(".btn-save");for(let o=0;o<d.length;o++)d[o].setAttribute("disabled","disabled")},a=()=>{const d=document.querySelectorAll(".btn-save");for(let o=0;o<d.length;o++)d[o].removeAttribute("disabled")},p=async()=>{e();const d=document.getElementById("new_student_fname").value,o=document.getElementById("new_student_lname").value,y=document.getElementById("new_student_active").checked,S=f("user");try{(await(await fetch("/api/students/add",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fname:d,lname:o,active:y,user:S})})).json()).error!==!0?window.location.reload():(window.alert("Error, please try again"),a())}catch(b){console.log(b)}};return(d,o)=>(u(),c("div",ee,[o[0]||(o[0]=k('<span class="student-id"></span><span class="student-name"><input id="new_student_fname" type="text" name="fname" placeholder="First Name"> <input id="new_student_lname" type="text" name="lname" placeholder="Last Name"></span><span class="student-status"><input id="new_student_active" type="checkbox" checked><label for="new_student_active">Active?</label></span>',3)),t("span",te,[l(i,{classes:"btn btn-save",base:"save",onClicked:p})]),o[1]||(o[1]=t("span",{class:"student-del"},null,-1))]))}}),ne={id:"main"},ae={class:"tile"},oe={id:"student-table"},de={class:"table-header"},le={class:"table-text student-btn-header"},ie={class:"row-container"},re={key:0,class:A("student-row")},ue={name:"app",components:{Student:g,RateMenu:v,NewStudent:w,IconButton:i},async mounted(){this.populateUser(),this.getStudents()},methods:{populateUser(){this.User={user:f("user"),displayName:decodeURIComponent(f("displayName")),rate:f("rate")}},async getStudents(){const s=this.User.user,e=await(await fetch(`/api/students/read/${s}`)).json();e.error?console.log("Error"):this.Students=e.data},toggle_new_student(){document.getElementById("new-student-menu").classList.toggle("hidden")}},data(){return{User:{},Students:[]}}},ce=Object.assign(ue,{setup(s){return(n,e)=>(u(),c("main",ne,[t("div",ae,[t("header",null,[e[0]||(e[0]=t("span",{class:"header-left"},[t("a",{class:"screen-reader-only"},"Skip to Content")],-1)),e[1]||(e[1]=t("h3",null,"Student Management System",-1)),l(C,null,{default:h(()=>[_(r(n.User.displayName),1)]),_:1})]),t("div",oe,[t("div",de,[e[2]||(e[2]=t("span",{class:"table-text student-id-header"},null,-1)),e[3]||(e[3]=t("span",{class:"table-text student-name-header"},"Student",-1)),e[4]||(e[4]=t("span",{class:"table-text student-status"},"All",-1)),e[5]||(e[5]=t("span",{class:"table-text student-del-header"},null,-1)),t("span",le,[l(i,{classes:"btn btn-add",base:"plus",alt:"caret-up",onClicked:n.toggle_new_student},null,8,["onClicked"])])]),t("div",ie,[l(w,{id:"new-student-menu",class:"hidden",onCancelled:n.toggle_new_student},null,8,["onCancelled"]),(u(!0),c(j,null,B(n.Students,a=>(u(),I(g,{key:a.id_short,id:a.id_short,fname:a.fname,lname:a.lname,active:a.active.toString()},null,8,["id","fname","lname","active"]))),128)),n.Students.length===0?(u(),c("div",re,e[6]||(e[6]=[t("h5",{class:"table-text rate-table"},"No Students, add one!",-1)]))):N("",!0)])]),l(v,{default:n.User.rate},null,8,["default"])])]))}});m.add(x);m.add(U);m.add(q);m.add(E);m.add(O);m.add(D);V(ce).component("font-awesome-icon",F).mount("#app");
