import{d as C,c as d,o as l,a as t,t as p,F as h,g as $,_ as y,D as g,r as _,u as m,b as o,e as b,q as k,s as D,f as S,h as j,l as u,v as q,i as N,j as A,k as M,w as O,m as B,x as F,y as I,z as P,n as J,p as L}from"./index.es-C4TXnmf2.js";const V={name:"StudentMenu",props:{students:{required:!0,default:[{fname:"Joost",id:9999}],type:Array},current:{required:!0,default:{fname:"Joost",id:9999},type:Object}}},U={class:"name-list"},z={class:"name-list-ul"},R=["href"];function T(e,a,n,s,c,r){return l(),d("details",null,[t("summary",null,p(n.current.fname),1),t("div",U,[t("ul",z,[(l(!0),d(h,null,$(n.students,i=>(l(),d("li",{key:i.id_short,class:"name-list-li"},[t("a",{href:`/manage:${i.id_short}`},p(i.fname),9,R)]))),128))])])])}const w=C(V,[["render",T]]),E=e=>{let a=new Date(e);return`${a.getMonth()+1}/${a.getDate()}/${a.getFullYear()}`},f=e=>{let a=new Date(e);return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},H=(e,a,n)=>{let s=a-e,c=Math.ceil(s/1e3/60/60);return n*c},Y=["id"],G={class:"row-top"},K={key:0,class:"table-text check-table"},Q={key:1,class:"table-text check-table"},W={class:"table-text id-table"},X={class:"table-text date-table"},Z={class:"table-text time-table class-in"},tt={class:"table-text time-table class-in"},et={class:"table-text rate-table"},st={class:"table-text charge-table"},at={class:"table-text btn-table"},nt=["id"],it={class:"table-input check-table-input"},lt=["id"],ot=["id"],dt=["for"],ct={class:"table-input btn-table-input"},rt={class:"btn btn-add"},ut={name:"Session",props:{selected:{required:!1,default:"false",type:String},paid:{required:!1,default:"false",type:String},id:{required:!0,default:9999,unique:!0,type:Number},time_in:{required:!1,default:Date.now()-1e3*60*60,type:Date},time_out:{required:!1,default:Date.now(),type:Date},rate:{required:!0,default:65,type:Number}},components:[y,g]},x=Object.assign(ut,{setup(e){const a=n=>{document.querySelector(`#details-${n}`).classList.toggle("hidden")};return(n,s)=>{const c=_("font-awesome-icon");return l(),d("div",{id:`row-${e.id}`,class:D(`session-row ${e.paid==="true"?"":"unpaid"}`)},[t("div",G,[e.selected==="true"?(l(),d("span",K,s[1]||(s[1]=[t("input",{type:"checkbox",checked:""},null,-1)]))):(l(),d("span",Q,s[2]||(s[2]=[t("input",{type:"checkbox",unchecked:""},null,-1)]))),t("span",W,p(e.id),1),t("span",X,p(m(E)(e.time_in)),1),t("span",Z,p(m(f)(e.time_in)),1),t("span",tt,p(m(f)(e.time_out)),1),t("span",et,"$"+p(e.rate),1),t("span",st,"$"+p(m(H)(e.time_in,e.time_out,e.rate)),1),t("span",at,[o(y,{onClicked:s[0]||(s[0]=r=>a(e.id)),should_switch:"true"})])]),t("div",{id:`details-${e.id}`,class:"row-bottom hidden"},[t("span",it,[e.paid==="true"?(l(),d("input",{key:0,type:"checkbox",id:`${e.id}-paid`,checked:""},null,8,lt)):(l(),d("input",{key:1,type:"checkbox",id:`${e.id}-paid`,unchecked:""},null,8,ot)),t("label",{for:`${e.id}-paid`},"Paid",8,dt)]),s[4]||(s[4]=b('<span class="table-input date-table"><input type="text"></span><span class="table-input time-table class-in"><input type="text"></span><span class="table-input time-table class-in"><input type="text"></span><span class="table-input rate-table"><input type="text"></span>',4)),t("span",ct,[t("button",rt,[o(c,{icon:"save"})]),s[3]||(s[3]=k("   ")),o(g)])],8,nt)],10,Y)}}}),pt={class:"edit-name"},mt=["placeholder"],bt=["placeholder"],_t={name:"NameMenu",props:{fname:{required:!0,default:"Joost",type:String},lname:{required:!0,default:"Doe",type:String}}},v=Object.assign(_t,{emits:["saved"],setup(e,{emit:a}){const n=a,s=()=>{n("saved")};return(c,r)=>{const i=_("font-awesome-icon");return l(),d("div",pt,[r[1]||(r[1]=t("label",{for:"fname"},"Name",-1)),t("input",{type:"text",id:"fname",placeholder:e.fname},null,8,mt),t("input",{type:"text",id:"lname",placeholder:e.lname},null,8,bt),t("button",{class:"btn btn-save",onClick:r[0]||(r[0]=qt=>s())},[o(i,{icon:"save"})])])}}}),ft={id:"main"},ht={class:"tile"},$t={class:"header-left"},yt={class:"nav-back btn",href:"/"},gt={class:"session-controls"},kt={class:"btn btn-invoice"},St={id:"session-table"},wt={class:"table-header"},xt={class:"check-table"},vt={class:"table-text btn-table"},Ct={class:"row-container"},Dt={name:"app",components:{StudentMenu:w,AuthMenu:S,Session:x,NameMenu:v},async mounted(){this.getSessions(),this.getStudents()},methods:{async getSessions(){const a=await(await fetch(`/api/sessions/read/${localStorage.getItem("student")}`)).json();this.Sessions=a.data},async getStudents(){const a=await(await fetch("/api/students/read")).json();this.AllStudents=a.data,this.CurrentStudent=a.data.filter(n=>n.id_short===Number(localStorage.getItem("student")))[0]}},data(){return{Sessions:[],AllStudents:[],CurrentStudent:{}}}},jt=Object.assign(Dt,{setup(e){const a=async()=>{const s=await(await fetch("/api/sessions/add",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({student:Number(localStorage.getItem("student")),in_time:Date.now()-36e5,out_time:Date.now(),rate:65,paid:!1})})).json();console.log(s),window.location.reload()};return(n,s)=>{const c=_("font-awesome-icon"),r=_("add-student");return l(),d("main",ft,[t("div",ht,[t("header",null,[t("span",$t,[s[2]||(s[2]=t("a",{class:"screen-reader-only"},"Skip to Content",-1)),t("a",yt,[o(c,{icon:"caret-left"}),s[1]||(s[1]=k(" Back"))])]),o(w,{current:n.CurrentStudent,students:n.AllStudents},null,8,["current","students"]),o(S)]),t("div",gt,[t("button",kt,[o(c,{icon:"print"})]),t("button",{class:"btn btn-add-class",onClick:a},"New Class"),s[3]||(s[3]=b('<span class="date-range"><input type="text" id="date-start"> – <input type="text" id="date-end"><button class="btn btn-dates">Filter</button><button class="btn btn-dates">Reset</button></span>',1))]),t("div",St,[t("div",wt,[t("span",xt,[t("details",null,[t("summary",null,[o(c,{icon:"list-check"})]),s[4]||(s[4]=b('<div class="check-list"><ul class="check-list-ul"><li class="check-list-li"><a href="#">All</a></li><li class="check-list-li"><a href="#">Clear</a></li><li class="check-list-li"><a href="#">Paid</a></li><li class="check-list-li"><a href="#">Unpaid</a></li></ul></div>',1))])]),s[5]||(s[5]=b('<span class="table-text id-table">#</span><span class="table-text date-table">Date</span><span class="table-text time-table">In</span><span class="table-text time-table">Out</span><span class="table-text rate-table">Rate</span><span class="table-text charge-table">Charge</span>',6)),t("span",vt,[o(r)])]),t("div",Ct,[(l(!0),d(h,null,$(n.Sessions,i=>(l(),j(x,{key:i.number,selected:!1,paid:i.paid,id:i.number,time_in:i.in_time,time_out:i.out_time,rate:i.rate},null,8,["paid","id","time_in","time_out","rate"]))),128))])]),o(v,{onSaved:s[0]||(s[0]=i=>console.log("saved")),fname:n.fname,lname:n.lname},null,8,["fname","lname"])])])}}});u.add(q);u.add(N);u.add(A);u.add(M);u.add(O);u.add(B);u.add(F);u.add(I);u.add(P);J(jt).component("font-awesome-icon",L).mount("#app");
